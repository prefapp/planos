nombre: odoo

autor: "Francisco y Javier"

version: 0.0

construcciones: 

    app_data:

        image: busybox
    
        volumes:

            - "@{app}#{data_dir}"    

    app: 

        role: odoo_app

        ports:

            - "80:80"
            - "443:443"

        volumes_from:

            - app_data

        parameters:

            admin_password:

                riyic:

                    name: "app/odoo/installations/[0]/admin_password"
                    recipe: "app_odoo::deploy"

                user_provided: 1
                    
                value: "12345lol34" 

    db:

        role: odoo_db

        command: "/root/start.sh"

        expose: 

            - 5432

        volumes:

            - "/var/lib/postgresql/9.3/main"

        
        parameters:

            password_db:

                riyic: 

                    name: "dbs/postgresql/dbs/[0]/password"
                    recipe: "dbs_postresql::create_db"

                value: "12345lol34"

            postgres_password:

                riyic: 

                    name: "dbs/postgresql/server/postgres_password"
                    recipe: "dbs_postresql::server"

                value: "9999999999"
