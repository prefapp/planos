nombre: docker_dev

autor: "Javier G. <jgomez@prefapp.in>"

descripcion: >

  "Servicio ssh con acceso con key para un usuario, e conexion co host de docker"

version: 0.0

uso_interno: 1

category: services

construcciones:
  ssh:

    role: sshd_y_docker

    ports:
      - "#{ssh_port}:22"

    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /home:/home

    parameters:
      username:
        default: root
        user_provided: 1
        riyic:
          name: "system/users/bash/[0]/username"
          recipe: "system_user::with_bash"

      ssh_keys:
        user_provided: 1
        default: []
        riyic:
          name: "system/users/bash/[0]/ssh_keys"
          recipe: "system_user::with_bash"

      ssh_port:
        user_provided: 1
        valor: 2222
        default: 2222
        variable:
          display_name: "Ssh connection port"
          field_type: "text"
          validations: 
            regexp: "\d+"
          required: 1




